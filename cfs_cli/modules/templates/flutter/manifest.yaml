# Flutter Template Manifest
# This file defines the template structure, variables, and hooks for the cfs generator

name: flutter
description: Flutter application template with modular architecture and GraphQL support using go_router
version: 1.0.0

# Variables define the inputs users provide when scaffolding
variables:
  project_name:
    type: string
    prompt: "Project name (flutter project directory name)"
    default: "flutter_app"
    validation: "^[a-z][a-z0-9_]*$"

  package_name:
    type: string
    prompt: "Package name/Organization (e.g., com.example.app)"
    default: "com.example.app"
    validation: "^[a-z][a-z0-9]*(\\.[a-z][a-z0-9]*)*$"

  api_protocol:
    type: choice
    prompt: "API protocol type"
    choices: ["rest", "graphql", "websocket"]
    default: "graphql"

# Computed variables (derived from user inputs)
computed:
  org_identifier: "{{ package_name.rsplit('.', 1)[0] if '.' in package_name else 'com.example' }}"
  app_name: "{{ project_name.replace('_', ' ').title() }}"

# Files source directory containing Jinja2 templates
files_source: "src_templates"

# Structure defines the directory and file layout
# Note: Flutter base project is created by 'flutter create' in pre_gen hook
# This structure defines additional files/directories we add after creation
structure:
  # Root lib directory (already exists from flutter create)
  - path: "{{ project_name }}/lib"
    type: dir

  # Core module (shared infrastructure)
  - path: "{{ project_name }}/lib/core"
    type: dir

  - path: "{{ project_name }}/lib/core/api_config"
    type: dir


  - path: "{{ project_name }}/lib/core/api_config/api_parameters.dart"
    type: file
    source: "lib/core/api_config/api_parameters.dart.j2"


  - path: "{{ project_name }}/lib/core/api_config/graphql"
    type: dir

  - path: "{{ project_name }}/lib/core/api_config/graphql/graphql_url_config.dart"
    type: file
    source: "lib/core/api_config/graphql/graphql_url_config.dart.j2"

  - path: "{{ project_name }}/lib/core/api_config/graphql/graphql_service.dart"
    type: file
    source: "lib/core/api_config/graphql/graphql_service.dart.j2"

  - path: "{{ project_name }}/lib/core/api_config/graphql/graphql_operation.dart"
    type: file
    source: "lib/core/api_config/graphql/graphql_operation.dart.j2"

  - path: "{{ project_name }}/lib/core/api_config/rest"
    type: dir

  - path: "{{ project_name }}/lib/core/api_config/rest/rest_api_service.dart"
    type: file
    source: "lib/core/api_config/rest/rest_api_service.dart.j2"

  - path: "{{ project_name }}/lib/core/constants"
    type: dir

  - path: "{{ project_name }}/lib/core/constants/dimensions.dart"
    type: file
    source: "lib/core/constants/dimensions.dart.j2"

  - path: "{{ project_name }}/lib/core/constants/graphql_objects.dart"
    type: file
    source: "lib/core/constants/graphql_objects.dart.j2"

  - path: "{{ project_name }}/lib/core/enums"
    type: dir

  - path: "{{ project_name }}/lib/core/enums/app_theme_enum.dart"
    type: file
    source: "lib/core/enums/app_theme_enum.dart.j2"

  - path: "{{ project_name }}/lib/core/enums/global_reusable_state.dart"
    type: file
    source: "lib/core/enums/global_reusable_state.dart.j2"

  - path: "{{ project_name }}/lib/core/enums/graphql_operation_enum.dart"
    type: file
    source: "lib/core/enums/graphql_operation_enum.dart.j2"

  - path: "{{ project_name }}/lib/core/enums/text_type.dart"
    type: file
    source: "lib/core/enums/text_type.dart.j2"

  - path: "{{ project_name }}/lib/core/injection"
    type: dir

  - path: "{{ project_name }}/lib/core/injection/dependency_injection.dart"
    type: file
    source: "lib/core/injection/dependency_injection.dart.j2"

  - path: "{{ project_name }}/lib/core/localizations"
    type: dir

  - path: "{{ project_name }}/lib/core/localizations/.gitkeep"
    type: file
    source: "lib/core/localizations/.gitkeep"

  - path: "{{ project_name }}/lib/core/mixins"
    type: dir

  - path: "{{ project_name }}/lib/core/mixins/app_theme_mixin.dart"
    type: file
    source: "lib/core/mixins/app_theme_mixin.dart.j2"

  - path: "{{ project_name }}/lib/core/routes"
    type: dir

  - path: "{{ project_name }}/lib/core/routes/app_routers.dart"
    type: file
    source: "lib/core/routes/app_routers.dart.j2"

  - path: "{{ project_name }}/lib/core/storage"
    type: dir

  - path: "{{ project_name }}/lib/core/storage/flutter_secure_storage_keys.dart"
    type: file
    source: "lib/core/storage/flutter_secure_storage_keys.dart.j2"

  - path: "{{ project_name }}/lib/core/storage/flutter_secure_storage_service.dart"
    type: file
    source: "lib/core/storage/flutter_secure_storage_service.dart.j2"

  - path: "{{ project_name }}/lib/core/theme"
    type: dir

  - path: "{{ project_name }}/lib/core/theme/app_theme.dart"
    type: file
    source: "lib/core/theme/app_theme.dart.j2"

  - path: "{{ project_name }}/lib/core/theme/app_colors.dart"
    type: file
    source: "lib/core/theme/app_colors.dart.j2"

  - path: "{{ project_name }}/lib/core/theme/controller"
    type: dir

  - path: "{{ project_name }}/lib/core/theme/controller/theme_controller.dart"
    type: file
    source: "lib/core/theme/controller/theme_controller.dart.j2"

  - path: "{{ project_name }}/lib/core/theme/modes"
    type: dir

  - path: "{{ project_name }}/lib/core/theme/modes/dark_theme.dart"
    type: file
    source: "lib/core/theme/modes/dark_theme.dart.j2"

  - path: "{{ project_name }}/lib/core/theme/modes/light_theme.dart"
    type: file
    source: "lib/core/theme/modes/light_theme.dart.j2"

  - path: "{{ project_name }}/lib/core/gen"
    type: dir

  - path: "{{ project_name }}/lib/core/gen/.gitkeep"
    type: file
    source: ".gitkeep.j2"

  # Modules directory (feature modules)
  - path: "{{ project_name }}/lib/modules"
    type: dir

  # Authentication module (default demo module with GraphQL CRUD)
  - path: "{{ project_name }}/lib/modules/authentication"
    type: dir

  # authentication data layer
  - path: "{{ project_name }}/lib/modules/authentication/data"
    type: dir

  # authentication data - models
  - path: "{{ project_name }}/lib/modules/authentication/data/graphql"
    type: dir

  - path: "{{ project_name }}/lib/modules/authentication/data/graphql/queries.dart"
    type: file
    source: "lib/modules/authentication/data/graphql/queries.dart.j2"

  - path: "{{ project_name }}/lib/modules/authentication/data/graphql/mutations.dart"
    type: file
    source: "lib/modules/authentication/data/graphql/mutations.dart.j2"

  # authentication data - models
  - path: "{{ project_name }}/lib/modules/authentication/data/models"
    type: dir

  # authentication data - services
  - path: "{{ project_name }}/lib/modules/users/data/repositories"
    type: dir

  # authentication data - services
  - path: "{{ project_name }}/lib/modules/users/data/services"
    type: dir

  - path: "{{ project_name }}/lib/modules/authentication/data/services/auth_local_data_source.dart"
    type: file
    source: "lib/modules/authentication/data/services/auth_local_data_source.dart.j2"

  - path: "{{ project_name }}/lib/modules/authentication/data/services/auth_remote_data_source.dart"
    type: file
    source: "lib/modules/authentication/data/services/auth_remote_data_source.dart.j2"

  # authentication presentation layer
  - path: "{{ project_name }}/lib/modules/authentication/presentation"
    type: dir

  # authentication presentation - providers
  - path: "{{ project_name }}/lib/modules/authentication/presentation/providers"
    type: dir

  - path: "{{ project_name }}/lib/modules/authentication/presentation/providers/auth_provider.dart"
    type: file
    source: "lib/modules/authentication/presentation/providers/auth_provider.dart.j2"

  # authentication presentation - screens
  - path: "{{ project_name }}/lib/modules/users/presentation/screens"
    type: dir

  - path: "{{ project_name }}/lib/modules/authentication/presentation/screens/change_password.dart"
    type: file
    source: "lib/modules/authentication/presentation/screens/change_password.dart.j2"

  - path: "{{ project_name }}/lib/modules/authentication/presentation/screens/forgot_password.dart"
    type: file
    source: "lib/modules/authentication/presentation/screens/forgot_password.dart.j2"

  - path: "{{ project_name }}/lib/modules/authentication/presentation/screens/login.dart"
    type: file
    source: "lib/modules/authentication/presentation/screens/login.dart.j2"


  # authentication routes
  - path: "{{ project_name }}/lib/modules/authentication/routes"
    type: dir

  - path: "{{ project_name }}/lib/modules/authentication/routes/authentication_paths.dart"
    type: file
    source: "lib/modules/authentication/routes/authentication_paths.dart.j2"

  - path: "{{ project_name }}/lib/modules/authentication/routes/authentication_routers.dart"
    type: file
    source: "lib/modules/authentication/routes/authentication_routers.dart.j2"

  # Onboarding module
  - path: "{{ project_name }}/lib/modules/onboarding"
    type: dir

  # onboarding data layer
  - path: "{{ project_name }}/lib/modules/onboarding/data"
    type: dir

  # onboarding data - models
  - path: "{{ project_name }}/lib/modules/onboarding/data/models"
    type: dir

  # onboarding data - services
  - path: "{{ project_name }}/lib/modules/onboarding/data/services"
    type: dir

  # onboarding presentation layer
  - path: "{{ project_name }}/lib/modules/onboarding/presentation"
    type: dir

  # onboarding presentation - providers
  - path: "{{ project_name }}/lib/modules/onboarding/presentation/providers"
    type: dir

  - path: "{{ project_name }}/lib/modules/onboarding/presentation/providers/on_boarding_provider.dart"
    type: file
    source: "lib/modules/onboarding/presentation/providers/on_boarding_provider.dart.j2"

  # onboarding presentation - screens
  - path: "{{ project_name }}/lib/modules/onboarding/presentation/screens"
    type: dir

  - path: "{{ project_name }}/lib/modules/onboarding/presentation/screens/new_onboarding.dart"
    type: file
    source: "lib/modules/onboarding/presentation/screens/new_onboarding.dart.j2"

  - path: "{{ project_name }}/lib/modules/onboarding/presentation/screens/onboarding.dart"
    type: file
    source: "lib/modules/onboarding/presentation/screens/onboarding.dart.j2"

  - path: "{{ project_name }}/lib/modules/onboarding/presentation/screens/page_one.dart"
    type: file
    source: "lib/modules/onboarding/presentation/screens/page_one.dart.j2"

  - path: "{{ project_name }}/lib/modules/onboarding/presentation/screens/page_two.dart"
    type: file
    source: "lib/modules/onboarding/presentation/screens/page_two.dart.j2"

  - path: "{{ project_name }}/lib/modules/onboarding/presentation/screens/page_three.dart"
    type: file
    source: "lib/modules/onboarding/presentation/screens/page_three.dart.j2"

  - path: "{{ project_name }}/lib/modules/onboarding/presentation/screens/page_four.dart"
    type: file
    source: "lib/modules/onboarding/presentation/screens/page_four.dart.j2"

  - path: "{{ project_name }}/lib/modules/onboarding/presentation/screens/splash_screen.dart"
    type: file
    source: "lib/modules/onboarding/presentation/screens/splash_screen.dart.j2"

  # onboarding presentation - widgets
  - path: "{{ project_name }}/lib/modules/onboarding/presentation/widgets"
    type: dir

  - path: "{{ project_name }}/lib/modules/onboarding/presentation/widgets/onboarding_top_component.dart"
    type: file
    source: "lib/modules/onboarding/presentation/widgets/onboarding_top_component.dart.j2"

  # onboarding routes
  - path: "{{ project_name }}/lib/modules/onboarding/routes"
    type: dir

  - path: "{{ project_name }}/lib/modules/onboarding/routes/onboarding_paths.dart"
    type: file
    source: "lib/modules/onboarding/routes/onboarding_paths.dart.j2"

  - path: "{{ project_name }}/lib/modules/onboarding/routes/onboarding_routers.dart"
    type: file
    source: "lib/modules/onboarding/routes/onboarding_routers.dart.j2"

    # Shared directory (cross-module utilities)
  - path: "{{ project_name }}/lib/shared"
    type: dir

  # Shared utilities directory
  - path: "{{ project_name }}/lib/shared/utilities"
    type: dir

  # Shared utilities - helper methods
  - path: "{{ project_name }}/lib/shared/utilities/helper_methods"
    type: dir

  - path: "{{ project_name }}/lib/shared/utilities/helper_methods/avatar_color_generator.dart"
    type: file
    source: "lib/shared/utilities/helper_methods/avatar_color_generator.dart.j2"

  - path: "{{ project_name }}/lib/shared/utilities/helper_methods/bottom_circle_clipper.dart"
    type: file
    source: "lib/shared/utilities/helper_methods/bottom_circle_clipper.dart.j2"

  - path: "{{ project_name }}/lib/shared/utilities/helper_methods/center_right_clipper.dart"
    type: file
    source: "lib/shared/utilities/helper_methods/center_right_clipper.dart.j2"


  - path: "{{ project_name }}/lib/shared/utilities/helper_methods/date_formatter.dart"
    type: file
    source: "lib/shared/utilities/helper_methods/date_formatter.dart.j2"

  - path: "{{ project_name }}/lib/shared/utilities/helper_methods/date_to_iso_string.dart"
    type: file
    source: "lib/shared/utilities/helper_methods/date_to_iso_string.dart.j2"

  - path: "{{ project_name }}/lib/shared/utilities/helper_methods/device_orientation_checker.dart"
    type: file
    source: "lib/shared/utilities/helper_methods/device_orientation_checker.dart.j2"

  - path: "{{ project_name }}/lib/shared/utilities/helper_methods/device_security_checker.dart"
    type: file
    source: "lib/shared/utilities/helper_methods/device_security_checker.dart.j2"

  - path: "{{ project_name }}/lib/shared/utilities/helper_methods/format_time_ago.dart"
    type: file
    source: "lib/shared/utilities/helper_methods/format_time_ago.dart.j2"

  - path: "{{ project_name }}/lib/shared/utilities/helper_methods/name_initials.dart"
    type: file
    source: "lib/shared/utilities/helper_methods/name_initials.dart.j2"

  - path: "{{ project_name }}/lib/shared/utilities/helper_methods/word_capitalizer.dart"
    type: file
    source: "lib/shared/utilities/helper_methods/word_capitalizer.dart.j2"


  # Shared widgets
  - path: "{{ project_name }}/lib/shared/widgets"
    type: dir

  - path: "{{ project_name }}/lib/shared/widgets/animated_circle.dart"
    type: file
    source: "lib/shared/widgets/animated_circle.dart.j2"

  - path: "{{ project_name }}/lib/shared/widgets/custom_button.dart"
    type: file
    source: "lib/shared/widgets/custom_button.dart.j2"

  - path: "{{ project_name }}/lib/shared/widgets/custom_date_picker.dart"
    type: file
    source: "lib/shared/widgets/custom_date_picker.dart.j2"

  - path: "{{ project_name }}/lib/shared/widgets/custom_dropdown_field.dart"
    type: file
    source: "lib/shared/widgets/custom_dropdown_field.dart.j2"

  - path: "{{ project_name }}/lib/shared/widgets/custom_text.dart"
    type: file
    source: "lib/shared/widgets/custom_text.dart.j2"

  - path: "{{ project_name }}/lib/shared/widgets/custom_text_field.dart"
    type: file
    source: "lib/shared/widgets/custom_text_field.dart.j2"

  - path: "{{ project_name }}/lib/shared/widgets/custom_text_form_field.dart"
    type: file
    source: "lib/shared/widgets/custom_text_form_field.dart.j2"

  - path: "{{ project_name }}/lib/shared/widgets/custom_to_previous_page_btn.dart"
    type: file
    source: "lib/shared/widgets/custom_to_previous_page_btn.dart.j2"

  - path: "{{ project_name }}/lib/shared/widgets/glass_container.dart"
    type: file
    source: "lib/shared/widgets/glass_container.dart.j2"

  - path: "{{ project_name }}/lib/shared/widgets/loading_widget.dart"
    type: file
    source: "lib/shared/widgets/loading_widget.dart.j2"

  - path: "{{ project_name }}/lib/shared/widgets/notification_circle.dart"
    type: file
    source: "lib/shared/widgets/notification_circle.dart.j2"

  - path: "{{ project_name }}/lib/shared/widgets/page_header.dart"
    type: file
    source: "lib/shared/widgets/page_header.dart.j2"

  - path: "{{ project_name }}/lib/shared/widgets/radial_chart.dart"
    type: file
    source: "lib/shared/widgets/radial_chart.dart.j2"

  - path: "{{ project_name }}/lib/shared/widgets/status_card.dart"
    type: file
    source: "lib/shared/widgets/status_card.dart.j2"

  - path: "{{ project_name }}/lib/shared/widgets/text_component.dart"
    type: file
    source: "lib/shared/widgets/text_component.dart.j2"


  # Shared - providers
  - path: "{{ project_name }}/lib/shared/providers.dart"
    type: file
    source: "lib/shared/providers.dart.j2"


  # App configuration
  - path: "{{ project_name }}/lib/app.dart"
    type: file
    source: "lib/app.dart.j2"

  # App configuration
  - path: "{{ project_name }}/lib/main.dart"
    type: file
    source: "lib/main.dart.j2"

  # Environment configuration
  - path: "{{ project_name }}/.env.example"
    type: file
    source: ".env.example.j2"

  # Documentation
  - path: "{{ project_name }}/docs"
    type: dir

  - path: "{{ project_name }}/docs/ARCHITECTURE.md"
    type: file
    source: "docs/ARCHITECTURE.md.j2"

  - path: "{{ project_name }}/docs/MODULE_GUIDE.md"
    type: file
    source: "docs/MODULE_GUIDE.md.j2"

# Hooks execute shell scripts at specific points in the generation lifecycle
hooks:
  pre_gen:
    script: "scripts/pre_gen.sh"
    description: "Validates Flutter installation and creates Flutter project"

  post_gen:
    script: "scripts/post_gen.sh"
    description: "Installing packages (graphql_flutter, go_router, provider , http , dio , intl , toastnotification), sets up GraphQL configuration"